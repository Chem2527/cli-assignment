# Sprint 1: Initial Setup and Basic Vulnerability Scanning

## Tasks:
1. Set up the project repository and define the folder structure
The first step in this sprint was to establish the project repository and organize the folder structure.

### Step 1: Create Project Directory and Folder Structure

**Create a new directory for the project called container-vulnerability-scanner**:

```bash
mkdir container-vulnerability-scanner
cd container-vulnerability-scanner
```
**Create subdirectories for organizing various project components:**
```bash
mkdir images reports 
```
images/: Store Docker images pulled from the registry.
reports/: Store JSON reports generated by the vulnerability scanner.

**Advantages of storing images in local pc:**
```bash
Backup: Storing images locally ensures you have backups for future use or recovery.

Portability: You can easily transfer images between different machines without needing to pull them again.

Offline Usage: Local images allow you to work and deploy without relying on an internet connection.
```
**Command to Save Docker Image Locally:**
```bash
docker save -o images/python_3.8.tar python:3.8   ##(here we are storing docker images under images directory which we created earlier)
docker save -o images/alpine_3.15.tar alpine:3.15 ##(here we are storing docker images under images directory which we created earlier)
```

## Step 2. Install and configure the Trivy vulnerability scanner to scan Docker images
The next task was to install Trivy, a popular vulnerability scanner for Docker images, and configure it for scanning.

### Step 2.1: Install Docker Desktop
Download Docker Desktop for Windows from the official site: **Docker Desktop for Windows.**

 Install Docker Desktop by following the on-screen instructions.

### Step 2.2: Install Trivy
```bash
Download the Trivy release from GitHub:

Trivy Releases.

Extract the downloaded files to a local directory (e.g., C:\Users\<username>\Downloads\trivy_0.60.0_windows-64bit).

Add Trivy to the systemâ€™s PATH to make it easily executable from the command line:

Navigate to Control Panel > System and Security > System > Advanced system settings > Environment Variables.

Add the path to the Trivy folder (C:\Users\<username>\Downloads\trivy_0.60.0_windows-64bit) to the Path variable.
```
### Step 2.3: Verify Installation
After installation, verify the Trivy installation:

```bash
trivy --version
Expected Output:
```
```bash
Version: 0.60.0
Vulnerability DB:
  Version: 2
  UpdatedAt: 2025-03-25 12:18:21.772614959 +0000 UTC
  NextUpdate: 2025-03-26 12:18:21.772614689 +0000 UTC
  DownloadedAt: 2025-03-25 16:07:04.1260382 +0000 UTC
```
## Step 3. Pull a few sample images and perform initial vulnerability scans to understand output and logs
This step involves pulling a few sample Docker images and performing initial vulnerability scans using Trivy.

### Step 3.1: Pull Docker Images
Pull Docker images for testing:

```bash
docker pull python:3.8
docker pull alpine:3.15
```
### Step 3.2: Scan Docker Images with Trivy
Run the following commands to scan the images for vulnerabilities:

```bash
trivy image python:3.8
trivy image alpine:3.15
```
Trivy will scan the images and display vulnerabilities (if any) detected during the scan.

### Step 3.3: Save the Scan Reports as JSON
To save the scan results in JSON format, use the --format json flag and specify an output file in the reports/ directory:

```bash
trivy image python:3.8 --format json -o reports/python_3.8_report.json
trivy image alpine:3.15 --format json -o reports/alpine_3.15_report.json
```
This will generate two JSON files (python_3.8_report.json and alpine_3.15_report.json) that store the vulnerability details in a structured format.

## Step 4. Explore CVE database integration for real-time vulnerability checks
```bash
Trivy comes with an embedded vulnerability database that automatically updates itself on its first run. This enables Trivy to perform real-time vulnerability checks by referencing the most up-to-date CVE (Common Vulnerabilities and Exposures) database.
Explanation of Vulnerability Report Examples
The vulnerability reports generated by Trivy are in JSON format, providing detailed information about the vulnerabilities detected in the Docker images. Below are a few examples of what these vulnerabilities look like:
```
Example 1: Critical Vulnerability
```bash
{
  "Title": "zlib: integer overflow and resultant heap-based buffer overflow in zipOpenNewFileInZip4_6",
  "Description": "MiniZip in zlib through 1.3 has an integer overflow and resultant heap-based buffer overflow in zipOpenNewFileInZip4_6 via a long filename, comment, or extra field. NOTE: MiniZip is not a supported part of the zlib product. NOTE: pyminizip through 0.2.6 is also vulnerable because it bundles an affected zlib version, and exposes the applicable MiniZip code through its compress API.",
  "Severity": "CRITICAL",
  "CweIDs": ["CWE-190"]
}

Explanation:

Title: Describes the vulnerability (in this case, an integer overflow and heap-based buffer overflow in zlib).

Description: Provides detailed information about how the vulnerability occurs, which versions are affected, and potential impacts.

Severity: Marks this vulnerability as CRITICAL, which indicates a high level of severity and an urgent need for remediation.

CWE-190: Refers to a specific classification (CWE stands for Common Weakness Enumeration), identifying the vulnerability as related to integer overflow.
```
Example 2: High Vulnerability
```bash
{
  "Title": "libxml2: Stack-based buffer overflow in xmlSnprintfElements of libxml2",
  "Description": "libxml2 before 2.12.10 has a stack-based buffer overflow in xmlSnprintfElements in valid.c. To exploit this, DTD validation must occur for an untrusted document.",
  "Severity": "HIGH",
  "CweIDs": ["CWE-121"]
}
Explanation:

Title: Describes a stack-based buffer overflow in the libxml2 library.

Description: Describes how this vulnerability could be triggered by an untrusted document or DTD (Document Type Definition).

Severity: Marks this vulnerability as HIGH, which still requires attention but might be less critical than the previous one.

CWE-121: Refers to stack-based buffer overflow, which is a specific type of memory corruption vulnerability.
```
Example 3: Medium Vulnerability
```bash
{
  "Title": "libxml2: use-after-free in xmlUnlinkNode() in tree.c",
  "Description": "libxml2 through 2.11.5 has a use-after-free that can only occur after a certain memory allocation fails. This occurs in xmlUnlinkNode in tree.c.",
  "Severity": "MEDIUM",
  "CweIDs": ["CWE-416"]
}
Explanation:

Title: Describes a use-after-free vulnerability in libxml2.

Description: Explains that the vulnerability occurs when memory allocation fails during a specific operation in tree.c.

Severity: Marks this vulnerability as MEDIUM, indicating it may not be as easily exploitable but still poses a risk.

CWE-416: Refers to use-after-free, a vulnerability where memory is accessed after it has been freed, which can lead to undefined behavior or crashes.
```

